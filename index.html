<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gratis Vacature Analyse - 40-60% Meer Sollicitaties | KandidatenTekort.nl</title>
    <meta name="description" content="Upload je vacature en ontvang direct een AI-powered analyse. Krijg binnen 24 uur een geoptimaliseerde versie die 40-60% meer sollicitaties genereert.">

    <!-- Security & SEO Headers -->
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://kandidatentekort.nl/">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --orange: #FF6B35;
            --orange-light: #FF8555;
            --orange-dark: #E85A25;
            --blue: #1E3A8A;
            --blue-light: #3B5BA5;
            --green: #10b981;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-900: #111827;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: var(--gray-900);
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 20px;
            background: white;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--blue);
            margin-bottom: 10px;
        }

        .logo .accent {
            color: var(--orange);
        }

        .tagline {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 1.125rem;
            color: var(--gray-600);
            max-width: 700px;
            margin: 0 auto;
        }

        /* Main Upload Section */
        .upload-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--blue);
            margin-bottom: 10px;
            text-align: center;
        }

        .section-subtitle {
            text-align: center;
            color: var(--gray-600);
            margin-bottom: 30px;
        }

        /* Tab Switcher */
        .tab-switcher {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: var(--gray-100);
            padding: 5px;
            border-radius: 12px;
        }

        .tab-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            color: var(--gray-600);
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: white;
            color: var(--orange);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* File Upload Zone */
        .upload-zone {
            border: 3px dashed var(--gray-200);
            border-radius: 16px;
            padding: 60px 20px;
            text-align: center;
            background: var(--gray-50);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-zone:hover {
            border-color: var(--orange);
            background: #fff5f2;
        }

        .upload-zone.dragover {
            border-color: var(--orange);
            background: #fff5f2;
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .upload-text {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 10px;
        }

        .upload-hint {
            color: var(--gray-600);
            font-size: 0.95rem;
        }

        .file-input {
            display: none;
        }

        .file-info {
            margin-top: 20px;
            padding: 15px;
            background: var(--green);
            color: white;
            border-radius: 10px;
            display: none;
        }

        /* Text Input */
        .text-input-container {
            display: none;
        }

        .text-input-container.active {
            display: block;
        }

        .upload-zone.active {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .text-input {
            width: 100%;
            min-height: 300px;
            padding: 20px;
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .text-input:focus {
            outline: none;
            border-color: var(--orange);
            box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.1);
        }

        /* Analyze Button */
        .analyze-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--orange) 0%, var(--orange-dark) 100%);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 12px;
            font-size: 1.25rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Loading Spinner */
        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Quick Analysis Results */
        .quick-results {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            border-top: 5px solid var(--orange);
        }

        .quick-results.show {
            display: block;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .score-badge {
            display: inline-block;
            font-size: 3rem;
            font-weight: 800;
            color: white;
            background: linear-gradient(135deg, var(--orange), var(--orange-dark));
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
        }

        .score-label {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--gray-700);
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .insight-card {
            padding: 20px;
            background: var(--gray-50);
            border-radius: 12px;
            border-left: 4px solid var(--orange);
        }

        .insight-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .insight-title {
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 8px;
        }

        .insight-text {
            color: var(--gray-600);
            font-size: 0.95rem;
        }

        /* CTA Section */
        .cta-section {
            background: linear-gradient(135deg, var(--blue) 0%, var(--blue-light) 100%);
            color: white;
            padding: 50px 40px;
            border-radius: 20px;
            text-align: center;
        }

        .cta-title {
            font-size: 2.25rem;
            font-weight: 800;
            margin-bottom: 15px;
        }

        .cta-subtitle {
            font-size: 1.25rem;
            margin-bottom: 30px;
            opacity: 0.95;
        }

        .cta-btn {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: var(--orange);
            color: white;
            padding: 20px 40px;
            border-radius: 12px;
            font-size: 1.25rem;
            font-weight: 700;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .cta-btn:hover {
            background: var(--orange-light);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.4);
        }

        /* Trust Indicators */
        .trust-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
            text-align: center;
        }

        .trust-item {
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .trust-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--orange);
            margin-bottom: 10px;
        }

        .trust-label {
            color: var(--gray-600);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .logo { font-size: 2rem; }
            .tagline { font-size: 1.5rem; }
            .section-title { font-size: 1.5rem; }
            .upload-zone { padding: 40px 20px; }
            .upload-section { padding: 25px; }
            .cta-title { font-size: 1.75rem; }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">Kandidaten<span class="accent">Tekort</span>.nl</div>
            <h1 class="tagline">🎯 Verhoog Response Rate met 40-60%</h1>
            <p class="subtitle">Upload je vacature en ontvang direct een gratis AI-analyse. Vraag daarna je volledig geoptimaliseerde versie op!</p>
        </header>

        <!-- Trust Indicators -->
        <div class="trust-section">
            <div class="trust-item">
                <div class="trust-number">150+</div>
                <div class="trust-label">Vacatures geanalyseerd</div>
            </div>
            <div class="trust-item">
                <div class="trust-number">40-60%</div>
                <div class="trust-label">Meer sollicitaties</div>
            </div>
            <div class="trust-item">
                <div class="trust-number">30 sec</div>
                <div class="trust-label">Analyse tijd</div>
            </div>
            <div class="trust-item">
                <div class="trust-number">100%</div>
                <div class="trust-label">Gratis analyse</div>
            </div>
        </div>

        <!-- Upload Section -->
        <section class="upload-section">
            <h2 class="section-title">📄 Upload Je Vacature</h2>
            <p class="section-subtitle">Upload een bestand of plak je vacaturetekst hieronder</p>

            <!-- Tab Switcher -->
            <div class="tab-switcher">
                <button class="tab-btn active" onclick="switchTab('upload')" id="uploadTab">
                    📁 Upload Bestand
                </button>
                <button class="tab-btn" onclick="switchTab('text')" id="textTab">
                    ✍️ Plak Tekst
                </button>
            </div>

            <!-- File Upload Zone -->
            <div class="upload-zone active" id="uploadZone" onclick="document.getElementById('fileInput').click()">
                <div class="upload-icon">📤</div>
                <div class="upload-text">Sleep je bestand hier of klik om te uploaden</div>
                <div class="upload-hint">Ondersteunt: PDF, DOC, DOCX, TXT (max 5MB)</div>
                <input type="file" id="fileInput" class="file-input" accept=".pdf,.doc,.docx,.txt" onchange="handleFileSelect(event)">
            </div>
            <div class="file-info" id="fileInfo"></div>

            <!-- Text Input Container -->
            <div class="text-input-container" id="textInputContainer">
                <textarea
                    id="vacatureText"
                    class="text-input"
                    placeholder="Plak hier je volledige vacaturetekst...

Voorbeeld:
Senior Marketing Manager - Amsterdam

Ben jij een ervaren marketing professional...

Minimaal 100 karakters voor een betrouwbare analyse."
                    maxlength="8000"
                ></textarea>
                <div style="text-align: right; color: var(--gray-600); margin-top: 8px;">
                    <span id="charCount">0</span> / 8000 karakters
                </div>
            </div>

            <!-- Analyze Button -->
            <button class="analyze-btn" id="analyzeBtn" onclick="startAnalysis()" disabled>
                <span id="btnIcon">🚀</span>
                <span id="btnText">Upload eerst een bestand of plak tekst</span>
            </button>
        </section>

        <!-- Quick Analysis Results -->
        <section class="quick-results" id="quickResults">
            <div class="results-header">
                <div class="score-badge" id="scoreBadge">-</div>
                <div class="score-label" id="scoreLabel">Vacature Score</div>
            </div>

            <h3 style="text-align: center; font-size: 1.5rem; margin-bottom: 25px; color: var(--gray-900);">
                📊 Snelle Analyse
            </h3>

            <div class="insights-grid" id="insightsGrid">
                <!-- Insights will be inserted here -->
            </div>

            <!-- CTA Section -->
            <div class="cta-section">
                <h3 class="cta-title">🎯 Wil je de volledige geoptimaliseerde vacature?</h3>
                <p class="cta-subtitle">Ontvang binnen 24 uur een professioneel herschreven versie die 40-60% meer sollicitaties genereert</p>
                <a href="https://form.typeform.com/to/z1GroMCc" target="_blank" class="cta-btn">
                    <span>📝</span>
                    <span>Vraag Geoptimaliseerde Vacature Op</span>
                    <span>→</span>
                </a>
                <p style="margin-top: 20px; font-size: 0.95rem; opacity: 0.9;">
                    ✓ Gratis analyse blijft beschikbaar • ✓ Geen verplichtingen • ✓ Response binnen 24 uur
                </p>
            </div>
        </section>
    </div>

    <script>
        let uploadedFile = null;
        let vacatureContent = '';

        // Tab switching
        function switchTab(tab) {
            const uploadZone = document.getElementById('uploadZone');
            const textContainer = document.getElementById('textInputContainer');
            const uploadTab = document.getElementById('uploadTab');
            const textTab = document.getElementById('textTab');
            const analyzeBtn = document.getElementById('analyzeBtn');
            const btnText = document.getElementById('btnText');

            if (tab === 'upload') {
                uploadZone.classList.add('active');
                textContainer.classList.remove('active');
                uploadTab.classList.add('active');
                textTab.classList.remove('active');

                if (uploadedFile) {
                    analyzeBtn.disabled = false;
                    btnText.textContent = 'Analyseer Vacature';
                } else {
                    analyzeBtn.disabled = true;
                    btnText.textContent = 'Upload eerst een bestand';
                }
            } else {
                uploadZone.classList.remove('active');
                textContainer.classList.add('active');
                uploadTab.classList.remove('active');
                textTab.classList.add('active');

                const text = document.getElementById('vacatureText').value.trim();
                if (text.length >= 100) {
                    analyzeBtn.disabled = false;
                    btnText.textContent = 'Analyseer Vacature';
                } else {
                    analyzeBtn.disabled = true;
                    btnText.textContent = 'Minimaal 100 karakters vereist';
                }
            }
        }

        // Character counter for text input
        document.getElementById('vacatureText').addEventListener('input', function() {
            const charCount = document.getElementById('charCount');
            const analyzeBtn = document.getElementById('analyzeBtn');
            const btnText = document.getElementById('btnText');

            charCount.textContent = this.value.length;

            if (this.value.trim().length >= 100) {
                analyzeBtn.disabled = false;
                btnText.textContent = 'Analyseer Vacature';
            } else {
                analyzeBtn.disabled = true;
                btnText.textContent = 'Minimaal 100 karakters vereist';
            }
        });

        // File handling
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Validate file size (5MB max)
            if (file.size > 5 * 1024 * 1024) {
                alert('❌ Bestand te groot. Maximaal 5MB toegestaan.');
                return;
            }

            // Validate file type
            const allowedTypes = ['.pdf', '.doc', '.docx', '.txt'];
            const fileExt = '.' + file.name.split('.').pop().toLowerCase();
            if (!allowedTypes.includes(fileExt)) {
                alert('❌ Ongeldig bestandstype. Gebruik: PDF, DOC, DOCX of TXT');
                return;
            }

            uploadedFile = file;

            // Show file info
            const fileInfo = document.getElementById('fileInfo');
            fileInfo.innerHTML = `✅ <strong>${file.name}</strong> (${(file.size / 1024).toFixed(1)} KB) - Klaar voor analyse!`;
            fileInfo.style.display = 'block';

            // Enable analyze button
            const analyzeBtn = document.getElementById('analyzeBtn');
            const btnText = document.getElementById('btnText');
            analyzeBtn.disabled = false;
            btnText.textContent = 'Analyseer Vacature';

            // Read file content for analysis
            readFileContent(file);
        }

        // Read file content
        function readFileContent(file) {
            const reader = new FileReader();

            reader.onload = function(e) {
                vacatureContent = e.target.result;

                // For text files, content is ready
                // For PDF/DOC, we'd need server-side processing
                // For now, we'll extract basic text
                if (file.type === 'text/plain') {
                    console.log('Text file loaded, ready for analysis');
                } else {
                    console.log('Binary file loaded, will be processed server-side');
                }
            };

            if (file.type === 'text/plain') {
                reader.readAsText(file);
            } else {
                reader.readAsDataURL(file);
            }
        }

        // Drag and drop
        const uploadZone = document.getElementById('uploadZone');

        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        });

        uploadZone.addEventListener('dragleave', () => {
            uploadZone.classList.remove('dragover');
        });

        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.classList.remove('dragover');

            const files = e.dataTransfer.files;
            if (files.length > 0) {
                document.getElementById('fileInput').files = files;
                handleFileSelect({ target: { files: files } });
            }
        });

        // Start Analysis
        async function startAnalysis() {
            const uploadTab = document.getElementById('uploadTab');
            const isFileMode = uploadTab.classList.contains('active');

            let textToAnalyze = '';

            if (isFileMode && uploadedFile) {
                if (uploadedFile.type === 'text/plain') {
                    textToAnalyze = vacatureContent;
                } else {
                    // For PDF/DOC, we need server-side processing
                    alert('⚠️ PDF/DOC parsing wordt momenteel geïmplementeerd. Gebruik voorlopig de "Plak Tekst" optie.');
                    switchTab('text');
                    return;
                }
            } else {
                textToAnalyze = document.getElementById('vacatureText').value.trim();
            }

            if (!textToAnalyze || textToAnalyze.length < 100) {
                alert('⚠️ Voer minimaal 100 karakters in voor een betrouwbare analyse.');
                return;
            }

            // Show loading state
            const analyzeBtn = document.getElementById('analyzeBtn');
            const btnIcon = document.getElementById('btnIcon');
            const btnText = document.getElementById('btnText');

            analyzeBtn.disabled = true;
            btnIcon.innerHTML = '<div class="spinner"></div>';
            btnText.textContent = 'Analyseren...';

            try {
                // Call Claude API for quick analysis
                const analysis = await performQuickAnalysis(textToAnalyze);
                displayQuickResults(analysis);

                // Scroll to results
                document.getElementById('quickResults').scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });

            } catch (error) {
                console.error('Analysis error:', error);
                alert('❌ Er ging iets mis bij de analyse. Probeer het opnieuw.');
            } finally {
                // Reset button
                analyzeBtn.disabled = false;
                btnIcon.textContent = '🚀';
                btnText.textContent = 'Analyseer Opnieuw';
            }
        }

        // Perform Quick Analysis (shortened version for lead gen)
        async function performQuickAnalysis(text) {
            const quickPrompt = `Analyseer deze Nederlandse vacaturetekst en geef een BEKNOPTE analyse:

VACATURE:
${text.substring(0, 2000)}

Geef ALLEEN dit JSON format terug (kort en krachtig):
{
  "score": X (cijfer 1-10),
  "insights": [
    {"icon": "💰", "title": "Korte titel", "text": "1 zin feedback"},
    {"icon": "📊", "title": "Korte titel", "text": "1 zin feedback"},
    {"icon": "🎯", "title": "Korte titel", "text": "1 zin feedback"}
  ]
}`;

            try {
                const response = await fetch('/.netlify/functions/claude-analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        prompt: quickPrompt,
                        max_tokens: 800
                    })
                });

                if (!response.ok) throw new Error('API call failed');

                const data = await response.json();
                let content = data.content[0].text;

                // Clean JSON
                content = content.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();

                return JSON.parse(content);
            } catch (error) {
                console.error('API error:', error);

                // Fallback mock analysis
                return generateMockQuickAnalysis(text);
            }
        }

        // Mock quick analysis
        function generateMockQuickAnalysis(text) {
            const hasSalary = /€|euro|salaris|loon/i.test(text);
            const hasLocation = /amsterdam|rotterdam|utrecht|eindhoven/i.test(text);
            const score = hasSalary ? 7 : 5;

            return {
                score: score,
                insights: [
                    {
                        icon: "💰",
                        title: hasSalary ? "Salaris vermeld ✓" : "Geen salaris ✗",
                        text: hasSalary ? "Goed! Vacatures met salaris krijgen 65% meer reacties." : "Voeg salaris toe voor 40-60% meer sollicitaties."
                    },
                    {
                        icon: "📊",
                        title: "Vacature lengte",
                        text: text.length > 500 ? "Goede lengte voor alle details." : "Te kort - voeg meer informatie toe."
                    },
                    {
                        icon: "🎯",
                        title: hasLocation ? "Locatie duidelijk ✓" : "Locatie onduidelijk",
                        text: hasLocation ? "Werklocatie is vermeld." : "Vermeld de werklocatie en thuiswerkmogelijkheden."
                    }
                ]
            };
        }

        // Display quick results
        function displayQuickResults(analysis) {
            const scoreBadge = document.getElementById('scoreBadge');
            const scoreLabel = document.getElementById('scoreLabel');
            const insightsGrid = document.getElementById('insightsGrid');
            const quickResults = document.getElementById('quickResults');

            // Update score
            scoreBadge.textContent = analysis.score + '/10';

            const scoreText = analysis.score >= 8 ? 'Uitstekend!' :
                            analysis.score >= 6 ? 'Goed' :
                            analysis.score >= 4 ? 'Gemiddeld' : 'Verbetering Nodig';
            scoreLabel.textContent = scoreText;

            // Update insights
            insightsGrid.innerHTML = analysis.insights.map(insight => `
                <div class="insight-card">
                    <div class="insight-icon">${insight.icon}</div>
                    <div class="insight-title">${insight.title}</div>
                    <div class="insight-text">${insight.text}</div>
                </div>
            `).join('');

            // Show results
            quickResults.classList.add('show');
        }
    </script>
</body>
</html>
